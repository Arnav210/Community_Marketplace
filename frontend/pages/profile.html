<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Your Profile - Community Marketplace">
    <title>Profile - Community Marketplace</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/profile.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <span class="logo-icon">üè™</span>
                <span class="logo-text">Community Marketplace</span>
            </a>
            
            <ul class="nav-menu" id="navMenu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="listings.html" class="nav-link">Browse</a>
                </li>
                <li class="nav-item">
                    <a href="create-listing.html" class="nav-link">Sell Item</a>
                </li>
                <li class="nav-item">
                    <a href="dashboard.html" class="nav-link">Dashboard</a>
                </li>
                <li class="nav-item">
                    <a href="profile.html" class="nav-link active">Profile</a>
                </li>
                <li class="nav-item">
                    <button id="logoutBtn" class="nav-link btn-outline">Logout</button>
                </li>
            </ul>
            
            <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">
                <span class="hamburger"></span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="profile-main">
        <div class="container">
            <!-- Profile Header -->
            <header class="profile-header">
                <div class="profile-cover" id="profileCover">
                    <button type="button" class="change-cover-btn" id="changeCoverBtn">
                        <span class="btn-icon">üì∑</span>
                        Change Cover
                    </button>
                </div>
                <div class="profile-info-header">
                    <div class="profile-avatar-wrapper">
                        <div class="profile-avatar" id="profileAvatar">
                            <span class="avatar-placeholder">üë§</span>
                            <img src="" alt="Profile" class="avatar-image hidden" id="avatarImage">
                        </div>
                        <button type="button" class="change-avatar-btn" id="changeAvatarBtn">
                            <span class="btn-icon">üì∑</span>
                        </button>
                        <input type="file" id="avatarInput" accept="image/*" class="hidden">
                    </div>
                    <div class="profile-name-info">
                        <h1 class="profile-name" id="profileName">Loading...</h1>
                        <p class="profile-location">
                            <span class="location-icon">üìç</span>
                            <span id="profileLocation">--</span>
                        </p>
                        <p class="profile-joined">Member since <span id="profileJoined">--</span></p>
                    </div>
                    <div class="profile-stats">
                        <div class="stat">
                            <span class="stat-value" id="profileListings">0</span>
                            <span class="stat-label">Listings</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="profileSold">0</span>
                            <span class="stat-label">Sold</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="profileRating">--</span>
                            <span class="stat-label">Rating</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Profile Content -->
            <div class="profile-content">
                <!-- Tabs -->
                <nav class="profile-tabs">
                    <button type="button" class="tab-btn active" data-tab="about">About</button>
                    <button type="button" class="tab-btn" data-tab="listings">Listings</button>
                    <button type="button" class="tab-btn" data-tab="reviews">Reviews</button>
                    <button type="button" class="tab-btn" data-tab="settings">Settings</button>
                </nav>

                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- About Tab -->
                    <section class="tab-panel active" id="aboutPanel">
                        <div class="about-section">
                            <div class="section-header">
                                <h2 class="section-title">About Me</h2>
                                <button type="button" class="edit-btn" id="editBioBtn">Edit</button>
                            </div>
                            <div class="bio-display" id="bioDisplay">
                                <p id="profileBio">No bio added yet.</p>
                            </div>
                            <form id="bioForm" class="bio-form hidden">
                                <textarea id="bioInput" class="form-textarea" rows="4" 
                                          maxlength="500" placeholder="Tell others about yourself..."></textarea>
                                <span class="char-count"><span id="bioCount">0</span>/500</span>
                                <div class="form-actions">
                                    <button type="button" class="btn btn-outline" id="cancelBioBtn">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Save</button>
                                </div>
                            </form>
                        </div>

                        <div class="contact-section">
                            <h2 class="section-title">Contact Information</h2>
                            <div class="contact-list">
                                <div class="contact-item">
                                    <span class="contact-icon">‚úâÔ∏è</span>
                                    <span class="contact-label">Email</span>
                                    <span class="contact-value" id="profileEmail">--</span>
                                    <span class="contact-visibility">(Only visible to you)</span>
                                </div>
                                <div class="contact-item">
                                    <span class="contact-icon">üì±</span>
                                    <span class="contact-label">Phone</span>
                                    <span class="contact-value" id="profilePhone">Not provided</span>
                                    <button type="button" class="edit-link" id="editPhoneBtn">Edit</button>
                                </div>
                            </div>
                        </div>

                        <div class="verification-section">
                            <h2 class="section-title">Verification</h2>
                            <div class="verification-list">
                                <div class="verification-item verified">
                                    <span class="verification-icon">‚úÖ</span>
                                    <span class="verification-label">Email Verified</span>
                                </div>
                                <div class="verification-item">
                                    <span class="verification-icon">‚¨ú</span>
                                    <span class="verification-label">Phone Verified</span>
                                    <button type="button" class="verify-btn">Verify Now</button>
                                </div>
                                <div class="verification-item">
                                    <span class="verification-icon">‚¨ú</span>
                                    <span class="verification-label">ID Verified</span>
                                    <button type="button" class="verify-btn">Verify Now</button>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Listings Tab -->
                    <section class="tab-panel hidden" id="listingsPanel">
                        <div class="section-header">
                            <h2 class="section-title">My Listings</h2>
                            <a href="create-listing.html" class="btn btn-primary btn-sm">+ New Listing</a>
                        </div>
                        <div class="listings-filter">
                            <button type="button" class="filter-btn active" data-filter="all">All</button>
                            <button type="button" class="filter-btn" data-filter="active">Active</button>
                            <button type="button" class="filter-btn" data-filter="sold">Sold</button>
                            <button type="button" class="filter-btn" data-filter="draft">Drafts</button>
                        </div>
                        <div class="listings-grid" id="profileListingsGrid">
                            <!-- Will be populated by JS -->
                        </div>
                        <div class="empty-state hidden" id="emptyListings">
                            <div class="empty-icon">üì¶</div>
                            <h3 class="empty-title">No listings yet</h3>
                            <p class="empty-description">Start selling by creating your first listing</p>
                            <a href="create-listing.html" class="btn btn-primary">Create Listing</a>
                        </div>
                    </section>

                    <!-- Reviews Tab -->
                    <section class="tab-panel hidden" id="reviewsPanel">
                        <div class="reviews-summary">
                            <div class="rating-overview">
                                <span class="rating-big" id="overallRating">--</span>
                                <div class="rating-stars" id="ratingStars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                <span class="rating-count">(<span id="reviewCount">0</span> reviews)</span>
                            </div>
                            <div class="rating-breakdown">
                                <div class="rating-bar">
                                    <span class="rating-label">5 ‚òÖ</span>
                                    <div class="bar-wrapper">
                                        <div class="bar-fill" style="width: 0%"></div>
                                    </div>
                                    <span class="rating-count">0</span>
                                </div>
                                <div class="rating-bar">
                                    <span class="rating-label">4 ‚òÖ</span>
                                    <div class="bar-wrapper">
                                        <div class="bar-fill" style="width: 0%"></div>
                                    </div>
                                    <span class="rating-count">0</span>
                                </div>
                                <div class="rating-bar">
                                    <span class="rating-label">3 ‚òÖ</span>
                                    <div class="bar-wrapper">
                                        <div class="bar-fill" style="width: 0%"></div>
                                    </div>
                                    <span class="rating-count">0</span>
                                </div>
                                <div class="rating-bar">
                                    <span class="rating-label">2 ‚òÖ</span>
                                    <div class="bar-wrapper">
                                        <div class="bar-fill" style="width: 0%"></div>
                                    </div>
                                    <span class="rating-count">0</span>
                                </div>
                                <div class="rating-bar">
                                    <span class="rating-label">1 ‚òÖ</span>
                                    <div class="bar-wrapper">
                                        <div class="bar-fill" style="width: 0%"></div>
                                    </div>
                                    <span class="rating-count">0</span>
                                </div>
                            </div>
                        </div>
                        <div class="reviews-list" id="reviewsList">
                            <!-- Will be populated by JS -->
                        </div>
                        <div class="empty-state" id="emptyReviews">
                            <div class="empty-icon">‚≠ê</div>
                            <h3 class="empty-title">No reviews yet</h3>
                            <p class="empty-description">Reviews from buyers will appear here</p>
                        </div>
                    </section>

                    <!-- Settings Tab -->
                    <section class="tab-panel hidden" id="settingsPanel">
                        <form id="settingsForm" class="settings-form">
                            <!-- Personal Information -->
                            <div class="settings-section">
                                <h2 class="section-title">Personal Information</h2>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="firstName" class="form-label">First Name</label>
                                        <input type="text" id="firstName" name="firstName" class="form-input" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="lastName" class="form-label">Last Name</label>
                                        <input type="text" id="lastName" name="lastName" class="form-input" required>
                                    </div>
                                    <div class="form-group full-width">
                                        <label for="email" class="form-label">Email Address</label>
                                        <input type="email" id="email" name="email" class="form-input" required>
                                        <span class="form-hint">Changing email will require re-verification</span>
                                    </div>
                                    <div class="form-group full-width">
                                        <label for="settingsLocation" class="form-label">Location</label>
                                        <input type="text" id="settingsLocation" name="location" class="form-input"
                                               placeholder="City, State">
                                    </div>
                                </div>
                            </div>

                            <!-- Password Change -->
                            <div class="settings-section">
                                <h2 class="section-title">Change Password</h2>
                                <div class="form-grid">
                                    <div class="form-group full-width">
                                        <label for="currentPassword" class="form-label">Current Password</label>
                                        <input type="password" id="currentPassword" name="currentPassword" class="form-input">
                                    </div>
                                    <div class="form-group">
                                        <label for="newPassword" class="form-label">New Password</label>
                                        <input type="password" id="newPassword" name="newPassword" class="form-input"
                                               minlength="8">
                                    </div>
                                    <div class="form-group">
                                        <label for="confirmNewPassword" class="form-label">Confirm New Password</label>
                                        <input type="password" id="confirmNewPassword" name="confirmNewPassword" class="form-input">
                                    </div>
                                </div>
                            </div>

                            <!-- Notification Preferences -->
                            <div class="settings-section">
                                <h2 class="section-title">Notification Preferences</h2>
                                <div class="notification-options">
                                    <label class="toggle-label">
                                        <span class="toggle-text">
                                            <span class="toggle-title">Email notifications</span>
                                            <span class="toggle-description">Receive updates about your listings via email</span>
                                        </span>
                                        <input type="checkbox" name="emailNotifications" class="toggle-input" checked>
                                        <span class="toggle-switch"></span>
                                    </label>
                                    <label class="toggle-label">
                                        <span class="toggle-text">
                                            <span class="toggle-title">Message alerts</span>
                                            <span class="toggle-description">Get notified when someone messages you</span>
                                        </span>
                                        <input type="checkbox" name="messageAlerts" class="toggle-input" checked>
                                        <span class="toggle-switch"></span>
                                    </label>
                                    <label class="toggle-label">
                                        <span class="toggle-text">
                                            <span class="toggle-title">Marketing emails</span>
                                            <span class="toggle-description">Receive tips, updates, and promotions</span>
                                        </span>
                                        <input type="checkbox" name="marketingEmails" class="toggle-input">
                                        <span class="toggle-switch"></span>
                                    </label>
                                </div>
                            </div>

                            <!-- Privacy Settings -->
                            <div class="settings-section">
                                <h2 class="section-title">Privacy</h2>
                                <div class="notification-options">
                                    <label class="toggle-label">
                                        <span class="toggle-text">
                                            <span class="toggle-title">Show online status</span>
                                            <span class="toggle-description">Let others see when you're active</span>
                                        </span>
                                        <input type="checkbox" name="showOnline" class="toggle-input" checked>
                                        <span class="toggle-switch"></span>
                                    </label>
                                    <label class="toggle-label">
                                        <span class="toggle-text">
                                            <span class="toggle-title">Show profile to search engines</span>
                                            <span class="toggle-description">Allow your profile to appear in search results</span>
                                        </span>
                                        <input type="checkbox" name="searchable" class="toggle-input">
                                        <span class="toggle-switch"></span>
                                    </label>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </div>
                        </form>

                        <!-- Danger Zone -->
                        <div class="settings-section danger-zone">
                            <h2 class="section-title">Danger Zone</h2>
                            <div class="danger-actions">
                                <div class="danger-item">
                                    <div class="danger-info">
                                        <h4>Deactivate Account</h4>
                                        <p>Temporarily disable your account. Your listings will be hidden.</p>
                                    </div>
                                    <button type="button" class="btn btn-outline btn-danger" id="deactivateBtn">
                                        Deactivate
                                    </button>
                                </div>
                                <div class="danger-item">
                                    <div class="danger-info">
                                        <h4>Delete Account</h4>
                                        <p>Permanently delete your account and all associated data.</p>
                                    </div>
                                    <button type="button" class="btn btn-danger" id="deleteAccountBtn">
                                        Delete Account
                                    </button>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2026 Community Marketplace. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="../js/common.js"></script>
    <script src="../js/profile.js"></script>
</body>
</html>
